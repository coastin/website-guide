$('.dropdown').each(function(){let $this=$(this),numberOfOptions=$(this).children('option').length,i=0;$this.addClass('select-hidden').wrap('<div class="select"></div>').after('<div class="js-dropdown"></div>');let $styledSelect=$this.next('div.js-dropdown');$styledSelect.text($this.children('option').eq(0).text());if($this.children('option').eq(0).hasClass('disabled')){i=1;$styledSelect.css('color','#FFFFFF;')}
let $list=$('<ul />',{'class':'select-options',}).insertAfter($styledSelect);for(i;i<numberOfOptions;i++){$('<li />',{text:$this.children('option').eq(i).text(),rel:$this.children('option').eq(i).val(),class:$this.children('option').eq(i).attr('class')}).appendTo($list);}
let $listItems=$list.children('li');$styledSelect.click(function(e){e.stopPropagation();if(($(document).height()-300)<e.clientY){$list.css('bottom','calc(100% + 10px)').css('top','unset');}
$('div.select-styled.active').not(this).each(function(){$(this).removeClass('active').next('ul.select-options').show();});$(this).toggleClass('active').next('ul.select-options').toggle();});$listItems.click(function(e){e.stopPropagation();$styledSelect.text($(this).text()).removeClass('active');$this.val($(this).attr('rel'));$list.hide();});$(document).click(function(){$styledSelect.removeClass('active');$list.hide();});});